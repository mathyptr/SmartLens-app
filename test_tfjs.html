<html>
  <head>
    <title>TensorFlow.js Model Loading Example</title>
  </head>
  <body>
   <!--    
    -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.2.0/dist/tf.min.js" type="text/javascript"></script>
 
   <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter@3.1.0/dist/tf-converter.min.js" type="text/javascript"></script>    

    <script>
      async function demo() {
        try {
          let modelURL ='http://127.0.0.1/SmartLens-app/networkModels/art_details_obj/botticelliwebmodel/model.json';  // layers: 1: bboxes ; 0: classes ; 4: probabilities
          const model = await tf.loadGraphModel(modelURL);
        tensor_label= model.signature.outputs;
        console.log('TFJS version: ' + tf.version.tfjs);
        console.log("model.outputNodes: "+model.outputNodes);
        console.log("model.signature: "+model.signature);
        console.log("model.signature outputs: "+model.signature.outputs);
        console.log("model.signature outputs: "+Object.entries(model.signature.outputs));

        let bb_id=0;
        let classes_id=0;
        let prob_id=0;
        let numdet_id=0;
        let probXview=0;
        const classes_label= "Identity_2:0";
const boundingBox_label= "Identity_1:0";
const probabilities_label= "Identity_4:0";
const num_detections_label="num_detections";

let i=0;
    for (const [key, value] of Object.entries(tensor_label)) {
        if(value['name']==classes_label)
            classes_id = i;
        else if(value['name']==boundingBox_label)
            bb_id = i;
        else if(value['name']==probabilities_label)
            prob_id = i;
        else if(value['name']==num_detections_label)
            numdet_id = i;
        console.log(value['name']+": "+i);
        i++;
    }


        } catch (error) {
          console.error("Error loading model:", error);
        }
      }
      demo();
    </script>
  </body>
</html>